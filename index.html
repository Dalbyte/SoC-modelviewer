<html>
<head>
  <title>XR Test</title>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
<link href="./style.css" type="text/css" />

</head>
<body>

  <!-- ios-src="./Buffalo.usdz" -->
    <model-viewer
      src="./Goldkopf.glb"

      poster="https://songsofcultures.com/web-ar/Goldkopf.webp"
      shadow-intensity="1"
      ar
      autoplay
      auto-rotate
      camera-target="0m 0.1m 0.05m"
      camera-controls
      quick-look-browsers="safari chrome"
      ar-modes="webxr scene-viewer quick-look"
      alt="A 3D model carousel"
      id="model-viewer"
    >
  
        
        <button slot="ar-button" id="ar-button">
          View in your space
        </button>
      
        <div id="ar-prompt">
          <img src="https://songsofcultures.com/web-ar/hand.png">
        </div>
      
        <button id="ar-failure">
          AR is not tracking!
        </button>

        <button class="button1"  id="MusicOn" onclick="PlayStop(this)">
          â™« Music on!
        </button>
        
      
        <div class="slider">
        
          <div class="slides">
            <button class="slide selected" onclick="switchSrc(this, 'Goldkopf')" style="background-image: url('https://songsofcultures.com/web-ar/Goldkopf.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Luchs')" style="background-image: url('https://songsofcultures.com/web-ar/Luchs.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Buffalo')" style="background-image: url('https://songsofcultures.com/web-ar/Buffalo.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Fuchs')" style="background-image: url('https://songsofcultures.com/web-ar/Fuchs.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Schildkroete')" style="background-image: url('https://songsofcultures.com/web-ar/Schildkroete.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Hirsch')" style="background-image: url('https://songsofcultures.com/web-ar/Hirsch.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Kuh')" style="background-image: url('https://songsofcultures.com/web-ar/Kuh.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Elefant')" style="background-image: url('https://songsofcultures.com/web-ar/Elefant.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'PonyBanjo')" style="background-image: url('https://songsofcultures.com/web-ar/PonyBanjo.webp');"></button>
            <button class="slide" onclick="switchSrc(this, 'Dachs')" style="background-image: url('https://songsofcultures.com/web-ar/Dachs.webp');"></button> 
        </button></div>

        </div>
      </model-viewer>


      <script>
        function PlayStop(ButtonPress){
          var sound = document.querySelector("#sound");
          
          if(ButtonPress.id == "MusicOn"){
            sound.load();
            sound.play();
            ButtonPress.innerText = "ðŸ”‡ Music off!";
            ButtonPress.id = "MusicOff";
            // console.log("An");
          }else{
            sound.pause();
            sound.currentTime = 0;
            ButtonPress.innerText = "â™« Music on!";
            ButtonPress.id = "MusicOn";
            //console.log("Aus");
          }

        }
      </script>

      <audio autoplay loop id="sound">
        <source src="https://songsofcultures.com/web-ar/audio/Goldkopf.mp3" type="audio/mpeg">
        <source src="https://songsofcultures.com/web-ar/audio/Goldkopf.ogg" type="audio/ogg">
        <p>Your browser doesn't support HTML5 audio.</p>
      </audio>
      
      <script type="module">
        const modelViewer = document.querySelector("model-viewer");
      
        window.switchSrc = (element, name) => {
          const base = './' + name;
          modelViewer.src = base + '.glb'; // Web
          //modelViewer.ios-src = base + '.usdz'; // IOS
          modelViewer.poster = base + '.webp';
          const slides = document.querySelectorAll(".slide");
          slides.forEach((element) => {element.classList.remove("selected");});
          element.classList.add("selected");

          // Audio Switch

          let sound = document.getElementById('sound');
          let AudioType = sound.children;

          for (let i = 0; i < AudioType.length; i++) {
            let element = AudioType[i];
            let baseaudio = 'https://songsofcultures.com/web-ar/audio/';
            if(element.getAttribute("type") == 'audio/mpeg'){
              element.src = baseaudio + name + '.mp3';
            }if(element.getAttribute("type") == 'audio/ogg') {
              element.src = baseaudio + name + '.ogg';
            }
            console.log(element.src);
          }
          
          // console.log(sound.paused);

          if(!sound.paused){
            sound.load();
            sound.play();
            
          }
        };
      
        document.querySelector(".slider").addEventListener('beforexrselect', (ev) => {
          // Keep slider interactions from affecting the XR scene.
          ev.preventDefault();
        });
      </script>
</body>
</html>





